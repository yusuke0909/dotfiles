#+----------------------------------------------------------------------------------------+
#  Prefix Key
#+----------------------------------------------------------------------------------------+
# ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚­ãƒ¼ã‚’è¨­å®š
set-option -g prefix C-t
unbind-key C-b
bind-key C-t send-prefix

#+----------------------------------------------------------------------------------------+
#  Session Options
#+----------------------------------------------------------------------------------------+
# æ–°ã—ã„ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦/ãƒšã‚¤ãƒ³ã®ãƒ™ãƒ¼ã‚¹ç•ªå·
set-option -g base-index 0
set-option -g pane-base-index 1

# å…¨ã¦ã®ãƒ™ãƒ«ã‚’ç„¡è¦–
set-option -g bell-action none

# å„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ä¿æŒã™ã‚‹ãƒãƒƒãƒ•ã‚¡æ•°
set-option -g buffer-limit 32

# 256è‰²ç«¯æœ«ã‚’ä½¿ç”¨
## Mac
set-option -g default-terminal "screen-256color"
## Linux
# set-option -g default-terminal "xterm-256color"

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å±¥æ­´ã§ä¿æŒã•ã‚Œã‚‹æœ€å¤§è¡Œæ•°
set-option -g history-limit 10000

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦åã®å¤‰æ›´å›é¿
set-option -g allow-rename off

# Escapeã‚­ãƒ¼å…¥åŠ›æ™‚ã®å¾…ã¡æ™‚é–“(0.5ç§’)ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
set-option -s escape-time 0

# mouseè¨­å®š
setw -g mouse on

# å³ã‚¯ãƒªãƒƒã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼
bind-key    -T root         MouseDown3Pane       if-shell -F -t = "#{||:#{mouse_any_flag},#{&&:#{pane_in_mode},#{?#{m/r:(copy|view)-mode,#{pane_mode}},0,1}}}" "select-pane -t= ; send -M" "display-menu -t= -xM -yM -T \"#[align=centre]#{pane_index} (#{pane_id})\" \
\"#{?#{m/r:(copy|view)-mode,#{pane_mode}},ä¸€ç•ªä¸Šã«ç§»å‹•ã™ã‚‹,}\" < \"send -X history-top\" \
\"#{?#{m/r:(copy|view)-mode,#{pane_mode}},ä¸€ç•ªä¸‹ã«ç§»å‹•ã™ã‚‹,}\" > \"send -X history-bottom\" \
'' \
\"#{?mouse_word,#[underscore]#{=/9/...:mouse_word}#[none]ã‚’æ¤œç´¢ã™ã‚‹,}\" C-r \"if -F \\\"#{?#{m/r:(copy|view)-mode,#{pane_mode}},0,1}\\\" \\\"copy-mode -t=\\\" ; send -Xt= search-backward \\\"#{q:mouse_word}\\\"\" \
\"#{?mouse_word,#[underscore]#{=/9/...:mouse_word}#[none]ã¨å…¥åŠ›ã™ã‚‹,}\" C-y \"copy-mode -q ; send-keys -l -- \\\"#{q:mouse_word}\\\"\" \
\"#{?mouse_word,#[underscore]#{=/9/...:mouse_word}#[none]ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹,}\" c \"copy-mode -q ; set-buffer -- \\\"#{q:mouse_word}\\\"\" \
\"#{?mouse_line,1è¡Œã‚³ãƒ”ãƒ¼ã™ã‚‹,}\" l \"copy-mode -q ; set-buffer -- \\\"#{q:mouse_line}\\\"\" \
'' \
\"ğŸ»ãƒšã‚¤ãƒ³ã‚’æ¨ªã«å¢—ã‚„ã™\" h \"split-window -h\" \
\"ğŸ£ãƒšã‚¤ãƒ³ã‚’ç¸¦ã«å¢—ã‚„ã™\" v \"split-window -v\" \
'' \
\"#{?#{>:#{window_panes},1},,-}ğŸ‘†ãƒšã‚¤ãƒ³ã‚’ä¸Šã¨äº¤æ›ã™ã‚‹\" u \"swap-pane -U\" \
\"#{?#{>:#{window_panes},1},,-}ğŸ‘‡ãƒšã‚¤ãƒ³ã‚’ä¸‹ã¨äº¤æ›ã™ã‚‹\" d \"swap-pane -D\" \
\"#{?pane_marked_set,,-}âœ…ãƒãƒ¼ã‚¯ä»˜ããƒšã‚¤ãƒ³ã¨å…¥ã‚Œæ›¿ãˆã‚‹\" s swap-pane \
'' \
âŒãƒšã‚¤ãƒ³ã‚’é–‰ã˜ã‚‹ X kill-pane \
ğŸ“–ãƒšã‚¤ãƒ³ã‚’åˆæœŸåŒ–ã™ã‚‹ R \"respawn-pane -k\" \
\"#{?pane_marked,ğŸŸ©ãƒãƒ¼ã‚¯ã‚’å¤–ã™,âœ…ãƒãƒ¼ã‚¯ã‚’ä»˜ã‘ã‚‹}\" m \"select-pane -m\" \
\"#{?#{>:#{window_panes},1},,-}#{?window_zoomed_flag,ğŸŒ±æœ€å¤§åŒ–ã‚’è§£é™¤ã™ã‚‹,ğŸŒ³æœ€å¤§åŒ–ã™ã‚‹}\" z \"resize-pane -Z\""


#+----------------------------------------------------------------------------------------+
#  Status Line
#+----------------------------------------------------------------------------------------+
set-option -g status on

set -g status-left '#[fg=colour254,bg=colour180,bold] #(hostname -s)#[deafult] #S #[fg=colour180,bg=colour238,nobold]â®€#[fg=colour215,bg=colour238,bold] #(whoami)#[fg=colour238,bg=colour248]â®€'
set -g status-right '#[fg=colour131,bg=colour248,nobold]â®‚#[fg=white,bg=colour131]#H â®ƒ #I:#P #[fg=colour221,bg=colour131,nobold]â®‚#[fg=colour88,bg=colour221] Mem #(used-mem)%% â®ƒ LAve.[#(loadaverage)] #[fg=colour255,bg=colour221,bold]â®‚#[fg=colour31,bg=colour255,bold] %Y/%m/%d(%a)%H:%M#[default]'

set-window-option -g window-status-format "#[fg=colour234, bg=colour248] #I: #W "
set-window-option -g window-status-current-format "#[fg=colour248, bg=colour124]â®€#[fg=colour255, bg=colour124] #I â® #W #[fg=colour124, bg=colour248]â®€"

# set -g message-attr bold
# set -g message-fg white
# set -g message-bg red

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³æ›´æ–°é–“éš”(ç§’)
set -g status-interval 1
# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³é•·ã•:å·¦å´
set -g status-left-length 120
# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³é•·ã•:å³å´
set -g status-right-length 120
# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³ã‚«ã‚¹ã‚¿ãƒ é–¢é€£
set -g status-bg colour248
set -g status-fg white
# set -g status-attr dim
set -g status-left-length 32
set -g status-right-length 150
# ãƒšã‚¤ãƒ³ã®åŒºåˆ‡ã‚Šç·šã®ã‚¹ã‚¿ã‚¤ãƒ«
set-option -g pane-border-style "fg=white,bg=black"
set-window-option -g pane-active-border-style "fg=red,bg=black"

#+----------------------------------------------------------------------------------------+
#  Window Options
#+----------------------------------------------------------------------------------------+
# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ãŸæ™‚ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç•ªå·ã‚’è©°ã‚ã‚‹
set-option -g renumber-windows on
# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä¸€è¦§
set -g mode-style fg=colour0,bg=colour215
# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰åã§è‡ªå‹•ãƒªãƒãƒ¼ãƒ 
set-window-option -g automatic-rename on
# ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ¢ãƒ¼ãƒ‰ã€ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã€é¸æŠãƒ¢ãƒ¼ãƒ‰ã§ vi ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’ä½¿ã†
set-window-option -g mode-keys vi
# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§å‹•ä½œãŒã‚ã‚‹ã¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³ã§ãƒã‚¤ãƒ©ã‚¤ãƒˆ
set -g visual-activity on
set -g visual-bell on
setw -g monitor-activity on
# setw -g window-status-activity-attr italics,reverse
# ã‚¿ã‚¤ãƒˆãƒ«è¡¨ç¤ºè¨­å®š
set-option -g set-titles on

#+----------------------------------------------------------------------------------------+
#  Bind Keys
#+----------------------------------------------------------------------------------------+
# C-Right,C-Leftã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦åˆ‡ã‚Šæ›¿ãˆ
# * Ctrl and arrow keys doesn't work in putty! What do I do?
# http://tmux.svn.sourceforge.net/viewvc/tmux/trunk/FAQ
set -g terminal-overrides "xterm*:kLFT5=\eOD:kRIT5=\eOC:kUP5=\eOA:kDN5=\eOB:smkx@:rmkx@:colors=256"
bind-key -n C-Right next-window
bind-key -n C-Left previous-window

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç§»å‹•
bind t last-window
bind C-t last-window
bind -r C-n next-window
bind -r C-p previous-window

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é¸æŠç”»é¢
bind Space choose-tree

# æ–°ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä½œæˆ
bind c new-window -c "#{pane_current_path}"
bind C-c new-window

# åˆ†å‰²ã—ã¦ã„ãŸãƒšã‚¤ãƒ³ãã‚Œãã‚Œã‚’Windowã«
bind b break-pane

# ãƒšã‚¤ãƒ³ã®ç¸¦åˆ†å‰²
bind h split-window -vc "#{pane_current_path}"

# ãƒšã‚¤ãƒ³ã®æ¨ªåˆ†å‰²
bind v split-window -hc "#{pane_current_path}"

# ãƒšã‚¤ãƒ³ç§»å‹•
bind -r C-h select-pane -L
bind -r C-j select-pane -D
bind -r C-k select-pane -U
bind -r C-l select-pane -R

# ãƒšã‚¤ãƒ³å‰Šé™¤
bind C-d kill-pane

# ãƒšã‚¤ãƒ³ãƒªã‚µã‚¤ã‚ºé–¢é€£vié¢¨
bind -r H resize-pane -L 6
bind -r J resize-pane -D 6
bind -r K resize-pane -U 6
bind -r L resize-pane -R 6
bind s swap-pane -U

# ãƒšã‚¤ãƒ³çµ‚äº†
#bind k kill-pane
bind k confirm-before -p "kill-pane ? (y/n)" kill-pane

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦çµ‚äº†
#bind K kill-window
bind K confirm-before -p "kill-window ? (y/n)" kill-window

# ãƒšã‚¤ãƒ³ç•ªå·è¡¨ç¤º
bind i display-panes

# ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰
bind-key y copy-mode \; display "(Copy mode)"

# ãƒšãƒ¼ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰
bind p paste-buffer

# vã§ãƒãƒ¼ã‚¯é–‹å§‹
if-shell "test expr '$OSTYPE' : 'darwin.*' > /dev/null" "set-option -g default-command 'reattach-to-user-namespace -l zsh'"
bind-key -T copy-mode-vi v send-keys -X begin-selection

# yã§ãƒ¤ãƒ³ã‚¯ + ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã‚³ãƒ”ãƒ¼
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"

# è¤‡æ•°ãƒšã‚¤ãƒ³ã¸ã®åŒæ™‚å…¥åŠ› 
set-option -g synchronize-panes off
bind-key e set-window-option synchronize-panes on \; set-option -g status-bg colour172 \; display 'Synchronize begin'
bind-key E set-window-option synchronize-panes off \; set-option -g status-bg black \; display 'Synchronize end'

# manã‚’æ–°è¦ãƒšã‚¤ãƒ³ã§é–‹ãã€çµ‚äº†ã™ã‚‹éš›ã«ãƒšã‚¤ãƒ³ã‚’é–‰ã˜ã‚‹
bind-key m command-prompt "split-window -p 65 'exec man %%'"

# sshæ¥ç¶šæ™‚ã«æ–°è¦ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦/ãƒšã‚¤ãƒ³ã§é–‹ã
unbind s

# æ–°ã—ã„ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦
bind-key s command-prompt "new-window -n %1 'TERM=xterm-256color sshrc -A %1'"

# ãƒšã‚¤ãƒ³ç¸¦åˆ†å‰²ã§é–‹ã
bind-key S command-prompt "split-window -h 'TERM=xterm-256color sshrc -A %1'"

# ãƒšã‚¤ãƒ³æ¨ªåˆ†å‰²ã§é–‹ã
bind-key T command-prompt "split-window 'TERM=xterm-256color sshrc -A %1'"

# ãƒšã‚¤ãƒ³ã‚’å†èµ·å‹•(é…ç½®ã¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç¶­æŒ)
bind q confirm-before -p "respawn-pane? (y/others)" "respawn-pane -k -c '#{pane_current_path}'"


# è¨­å®šãƒªãƒ­ãƒ¼ãƒ‰
bind r source-file ~/.tmux.conf ; display-message "Reload Config!!"

#+----------------------------------------------------------------------------------------+
#  tmux plugins
#+----------------------------------------------------------------------------------------+
# Tmux Plugin Manager(TPM):  git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm

# List of plugins
set -g @plugin 'tmux-plugins/tpm'

set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'

set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @continuum-save-interval '60'
set -g @continuum-restore 'on'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'


